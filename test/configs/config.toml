environment = "development"

[debug]
address = "tcp://localhost:6060"
timeout = "10s"

[cache]
kind = "redis"
encoder = "proto"
compressor = "snappy"
[cache.options]
url = "file:../test/secrets/redis"

[cache.redis.addresses]
server = "localhost:6379"

[crypto.aes]
key = "file:../test/secrets/aes"

[crypto.ed25519]
public = "file:../test/secrets/ed25519_public"
private = "file:../test/secrets/ed25519_private"

[crypto.hmac]
key = "file:../test/secrets/hmac"

[crypto.rsa]
public = "file:../test/secrets/rsa_public"
private = "file:../test/secrets/rsa_private"

[crypto.ssh]
public = "file:../test/secrets/ssh_public"
private = "file:../test/secrets/ssh_private"

[feature]
address = "localhost:9000"
timeout = "10s"

[feature.retry]
backoff = "100ms"
timeout = "1s"
attempts = 3

[hooks]
secret = "file:../test/secrets/hooks"

[id]
kind = "uuid"

[sql.pg]
max_open_conns = 5
max_idle_conns = 5
conn_max_lifetime = "1h"

[[sql.pg.masters]]
url = "file:../test/secrets/pg"

[[sql.pg.slaves]]
url = "file:../test/secrets/pg"

[telemetry.logger]
kind = "text"
level = "info"

[telemetry.metrics]
kind = "prometheus"

[telemetry.tracer]
kind = "otlp"
url = "http://localhost:4318/v1/traces"

[telemetry.tracer.headers]
Authorization = "file:../test/secrets/telemetry"

[time]
kind = "nts"
address = "time.cloudflare.com"

[transport.http]
address = "tcp://localhost:11000"
user_agent = "Service http/1.0"
timeout = "10s"

[transport.http.limiter]
kind = "user-agent"
tokens = 10
interval = "1s"

[transport.http.options]
read_timeout = "10s"
write_timeout = "10s"
idle_timeout = "10s"
read_header_timeout = "10s"

[transport.http.retry]
backoff = "100ms"
timeout = "1s"
attempts = 3

[transport.http.token]
kind = "jwt"

[transport.http.token.access]
policy = "../test/configs/rbac.csv"

[transport.http.token.jwt]
iss = "iss"
exp = "1h"
kid = "1234567890"

[transport.grpc]
address = "tcp://localhost:12000"
user_agent = "Service grpc/1.0"
timeout = "10s"

[transport.grpc.limiter]
kind = "user-agent"
tokens = 10
interval = "1s"

[transport.grpc.options]
keepalive_enforcement_policy_ping_min_time = "10s"
keepalive_max_connection_idle = "10s"
keepalive_max_connection_age = "10s"
keepalive_max_connection_age_grace = "10s"
keepalive_ping_time = "10s"

[transport.grpc.retry]
backoff = "100ms"
timeout = "1s"
attempts = 3

[transport.grpc.token]
kind = "jwt"

[transport.grpc.token.access]
policy = "../test/configs/rbac.csv"

[transport.grpc.token.jwt]
iss = "iss"
exp = "1h"
kid = "1234567890"
